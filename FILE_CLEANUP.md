# ðŸ—‘ï¸ à¸£à¸°à¸šà¸šà¸¥à¸šà¹„à¸Ÿà¸¥à¹Œà¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´ (File Cleanup System)

## ðŸ“‹ à¸ à¸²à¸žà¸£à¸§à¸¡

à¸£à¸°à¸šà¸šà¸™à¸µà¹‰à¸ˆà¸°à¸¥à¸šà¹„à¸Ÿà¸¥à¹Œà¸—à¸µà¹ˆà¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸­à¸±à¸›à¹‚à¸«à¸¥à¸”à¹à¸¥à¸°à¹„à¸Ÿà¸¥à¹Œà¸—à¸µà¹ˆà¸›à¸£à¸°à¸¡à¸§à¸¥à¸œà¸¥à¹à¸¥à¹‰à¸§à¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´ à¹€à¸žà¸·à¹ˆà¸­à¹„à¸¡à¹ˆà¹ƒà¸«à¹‰à¹„à¸Ÿà¸¥à¹Œà¸ªà¸°à¸ªà¸¡à¹ƒà¸™à¹€à¸‹à¸´à¸£à¹Œà¸Ÿà¹€à¸§à¸­à¸£à¹Œ

## ðŸ”§ à¸§à¸´à¸˜à¸µà¸à¸²à¸£à¸—à¸³à¸‡à¸²à¸™

### 1. **à¸¥à¸šà¹„à¸Ÿà¸¥à¹Œà¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´à¸•à¸²à¸¡à¹€à¸§à¸¥à¸²**
à¹„à¸Ÿà¸¥à¹Œà¸ˆà¸°à¸–à¸¹à¸à¸¥à¸šà¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´à¸«à¸¥à¸±à¸‡à¸ˆà¸²à¸à¸œà¹ˆà¸²à¸™à¹„à¸› **1 à¸Šà¸±à¹ˆà¸§à¹‚à¸¡à¸‡** (à¸„à¹ˆà¸²à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™)

### 2. **à¹‚à¸Ÿà¸¥à¹€à¸”à¸­à¸£à¹Œà¸—à¸µà¹ˆà¸ˆà¸°à¸¥à¸š**
- `media/uploads/` - à¹„à¸Ÿà¸¥à¹Œà¸—à¸µà¹ˆà¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸­à¸±à¸›à¹‚à¸«à¸¥à¸”
- `media/processed/` - à¹„à¸Ÿà¸¥à¹Œà¸—à¸µà¹ˆà¸›à¸£à¸°à¸¡à¸§à¸¥à¸œà¸¥à¹à¸¥à¹‰à¸§

## ðŸš€ à¸§à¸´à¸˜à¸µà¹ƒà¸Šà¹‰à¸‡à¸²à¸™

### **à¸£à¸±à¸™à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸¥à¸šà¹„à¸Ÿà¸¥à¹Œà¸”à¹‰à¸§à¸¢à¸•à¸™à¹€à¸­à¸‡**

```bash
# à¸¥à¸šà¹„à¸Ÿà¸¥à¹Œà¸—à¸µà¹ˆà¹€à¸à¹ˆà¸²à¸à¸§à¹ˆà¸² 1 à¸Šà¸±à¹ˆà¸§à¹‚à¸¡à¸‡ (à¸„à¹ˆà¸²à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™)
python manage.py cleanup_files

# à¸¥à¸šà¹„à¸Ÿà¸¥à¹Œà¸—à¸µà¹ˆà¹€à¸à¹ˆà¸²à¸à¸§à¹ˆà¸² 2 à¸Šà¸±à¹ˆà¸§à¹‚à¸¡à¸‡
python manage.py cleanup_files --hours 2

# à¸¥à¸šà¹„à¸Ÿà¸¥à¹Œà¸—à¸µà¹ˆà¹€à¸à¹ˆà¸²à¸à¸§à¹ˆà¸² 30 à¸™à¸²à¸—à¸µ
python manage.py cleanup_files --hours 0.5
```

### **à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸² Cron Job (Linux/Production)**

à¹€à¸žà¸´à¹ˆà¸¡à¹ƒà¸™ crontab à¹€à¸žà¸·à¹ˆà¸­à¸£à¸±à¸™à¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´à¸—à¸¸à¸ 30 à¸™à¸²à¸—à¸µ:

```bash
# à¹à¸à¹‰à¹„à¸‚ crontab
crontab -e

# à¹€à¸žà¸´à¹ˆà¸¡à¸šà¸£à¸£à¸—à¸±à¸”à¸™à¸µà¹‰ (à¸£à¸±à¸™à¸—à¸¸à¸ 30 à¸™à¸²à¸—à¸µ)
*/30 * * * * cd /path/to/pdf_master_project && /path/to/python manage.py cleanup_files --hours 1
```

### **à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸² Task Scheduler (Windows/Development)**

1. à¹€à¸›à¸´à¸” Task Scheduler
2. à¸ªà¸£à¹‰à¸²à¸‡ Basic Task à¹ƒà¸«à¸¡à¹ˆ
3. à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸² Trigger: à¸—à¸¸à¸ 30 à¸™à¸²à¸—à¸µ
4. Action: Start a program
   - Program: `python`
   - Arguments: `manage.py cleanup_files --hours 1`
   - Start in: `I:\Web\MankyFile\pdf_master_project`

## ðŸ“Š à¸à¸²à¸£à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š

### **à¸”à¸¹à¸ˆà¸³à¸™à¸§à¸™à¹„à¸Ÿà¸¥à¹Œà¸›à¸±à¸ˆà¸ˆà¸¸à¸šà¸±à¸™**

```bash
# Windows
dir media\uploads /s
dir media\processed /s

# Linux
find media/uploads -type f | wc -l
find media/processed -type f | wc -l
```

### **à¸¥à¸šà¹„à¸Ÿà¸¥à¹Œà¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”à¸—à¸±à¸™à¸—à¸µ (à¹ƒà¸Šà¹‰à¹€à¸‰à¸žà¸²à¸°à¹€à¸¡à¸·à¹ˆà¸­à¸ˆà¸³à¹€à¸›à¹‡à¸™)**

```python
# à¹ƒà¸™ Django shell
python manage.py shell

from utils.file_cleanup import cleanup_all_files
cleanup_all_files()
```

## âš™ï¸ à¸à¸²à¸£à¸›à¸£à¸±à¸šà¹à¸•à¹ˆà¸‡

### **à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¹€à¸§à¸¥à¸²à¸¥à¸šà¹„à¸Ÿà¸¥à¹Œà¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™**

à¹à¸à¹‰à¹„à¸‚à¹ƒà¸™ `utils/file_cleanup.py`:

```python
def cleanup_old_files(hours=1):  # à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸ˆà¸²à¸ 1 à¹€à¸›à¹‡à¸™à¹€à¸§à¸¥à¸²à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸à¸²à¸£
```

### **à¹€à¸žà¸´à¹ˆà¸¡à¹‚à¸Ÿà¸¥à¹€à¸”à¸­à¸£à¹Œà¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¸¥à¸š**

à¹à¸à¹‰à¹„à¸‚à¹ƒà¸™ `utils/file_cleanup.py`:

```python
for folder in ['uploads', 'processed', 'temp']:  # à¹€à¸žà¸´à¹ˆà¸¡à¹‚à¸Ÿà¸¥à¹€à¸”à¸­à¸£à¹Œà¹ƒà¸«à¸¡à¹ˆ
```

## ðŸ”’ à¸„à¸§à¸²à¸¡à¸›à¸¥à¸­à¸”à¸ à¸±à¸¢

- âœ… à¹„à¸Ÿà¸¥à¹Œà¸ˆà¸°à¸–à¸¹à¸à¸¥à¸šà¸–à¸²à¸§à¸£ à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸à¸¹à¹‰à¸„à¸·à¸™à¹„à¸”à¹‰
- âœ… à¸£à¸°à¸šà¸šà¸ˆà¸°à¸¥à¸šà¹€à¸‰à¸žà¸²à¸°à¹„à¸Ÿà¸¥à¹Œà¸—à¸µà¹ˆà¹€à¸à¹ˆà¸²à¸à¸§à¹ˆà¸²à¹€à¸§à¸¥à¸²à¸—à¸µà¹ˆà¸à¸³à¸«à¸™à¸”
- âœ… à¹„à¸¡à¹ˆà¸¡à¸µà¸à¸²à¸£à¹€à¸à¹‡à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ªà¹ˆà¸§à¸™à¸•à¸±à¸§à¸‚à¸­à¸‡à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¹ƒà¸™à¸£à¸°à¸¢à¸°à¸¢à¸²à¸§
- âœ… à¸›à¸à¸´à¸šà¸±à¸•à¸´à¸•à¸²à¸¡ GDPR à¹à¸¥à¸°à¸à¸Žà¸«à¸¡à¸²à¸¢à¸„à¸¸à¹‰à¸¡à¸„à¸£à¸­à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ªà¹ˆà¸§à¸™à¸šà¸¸à¸„à¸„à¸¥

## ðŸ“ à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸

- **Production**: à¸„à¸§à¸£à¸•à¸±à¹‰à¸‡ Cron Job à¹ƒà¸«à¹‰à¸£à¸±à¸™à¸—à¸¸à¸ 30 à¸™à¸²à¸—à¸µ - 1 à¸Šà¸±à¹ˆà¸§à¹‚à¸¡à¸‡
- **Development**: à¸£à¸±à¸™à¸”à¹‰à¸§à¸¢à¸•à¸™à¹€à¸­à¸‡à¹€à¸¡à¸·à¹ˆà¸­à¸•à¹‰à¸­à¸‡à¸à¸²à¸£
- **Database**: à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹ƒà¸™ database (UploadedFile, ProcessedFile) à¸ˆà¸°à¸¢à¸±à¸‡à¸„à¸‡à¸­à¸¢à¸¹à¹ˆ à¹à¸•à¹ˆà¹„à¸Ÿà¸¥à¹Œà¸ˆà¸£à¸´à¸‡à¸ˆà¸°à¸–à¸¹à¸à¸¥à¸š

## ðŸŽ¯ à¹à¸™à¸°à¸™à¸³

à¸ªà¸³à¸«à¸£à¸±à¸š Production à¸„à¸§à¸£à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²:
- à¸¥à¸šà¹„à¸Ÿà¸¥à¹Œà¸—à¸¸à¸ **30 à¸™à¸²à¸—à¸µ**
- à¸¥à¸šà¹„à¸Ÿà¸¥à¹Œà¸—à¸µà¹ˆà¹€à¸à¹ˆà¸²à¸à¸§à¹ˆà¸² **1 à¸Šà¸±à¹ˆà¸§à¹‚à¸¡à¸‡**
- à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š disk space à¹€à¸›à¹‡à¸™à¸›à¸£à¸°à¸ˆà¸³

```bash
# Cron Job à¹à¸™à¸°à¸™à¸³ (à¸£à¸±à¸™à¸—à¸¸à¸ 30 à¸™à¸²à¸—à¸µ)
*/30 * * * * cd /var/www/pdf_master_project && /usr/bin/python3 manage.py cleanup_files --hours 1 >> /var/log/cleanup.log 2>&1
```
